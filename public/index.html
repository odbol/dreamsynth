<!DOCTYPE html>
<html lang="en">
	<head>
		<title>mechatropolis - odbol</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

		<meta property="og:url"                content="https://odbol.com/mechatropolis" />
		<meta property="og:title"              content="mechatropolis" />
		<meta property="og:description"        content="An ancient city, built by beings unknown long before the dregs of our time, dots a familiar landscape.  What somber secrets does the city trap within its sonic boundaries? Wind whispers through the gaps of the abandoned buildings, and sometimes strange machinery can be heard ticking off below the ground. A light touch triggers reverberations into the barren wastes surrounding the mechatropolis." />
		<meta property="og:image"              content="https://odbol.com/mechatropolis/dreamsynth-screenshot.png" />
   
    <script id="fxhash-snippet">
      //---- do not edit the following code (you can indent as you wish)
      let alphabet = "123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"
      var fxhash = "oo" + Array(49).fill(0).map(_=>alphabet[(Math.random()*alphabet.length)|0]).join('')
      let b58dec = str=>[...str].reduce((p,c)=>p*alphabet.length+alphabet.indexOf(c)|0, 0)
      let fxhashTrunc = fxhash.slice(2)
      let regex = new RegExp(".{" + ((fxhash.length/4)|0) + "}", 'g')
      let hashes = fxhashTrunc.match(regex).map(h => b58dec(h))
      let sfc32 = (a, b, c, d) => {
        return () => {
          a |= 0; b |= 0; c |= 0; d |= 0
          var t = (a + b | 0) + d | 0
          d = d + 1 | 0
          a = b ^ b >>> 9
          b = c + (c << 3) | 0
          c = c << 21 | c >>> 11
          c = c + t | 0
          return (t >>> 0) / 4294967296
        }
      }
      var fxrand = sfc32(...hashes)
      // call this method to trigger the preview
      function fxpreview() {
        console.log("fxhash: TRIGGER PREVIEW")
      }
      //---- /do not edit the following code
    </script>

<style>
body {
	font-family: Monospace;
	background-color: #000;
	margin: 0px;
	overflow: hidden;
}

html {
  position: fixed;
  height: 100%;
  overflow: hidden;
}

body {
  width: 100vw;
  height: 100vh;
  overflow-y: hidden;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
}

a,
a:hover,
a:link,
a:visited,
a:active {
	color: #fff;
}

.button {
	position: fixed;
	bottom: 20px;
	right: 20px;
	width: 48px;
	height: 48px;
	background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAsElEQVQ4y2NgGFrgv8d/e9I0fP7////h/6qEFSb9jwDTKf/fA7V8+G+LX3kjUNEPKFv0/3og7/1/ddzKG/6DAZzP+n8r2GGMeJVDNABN5wWSAkBH/f/vgqrwyH80ABb9/38DmG4BsuajaviPQ8P//yZA2hpI3yJWQy6QFgbSX2mmwRi7k0j1NFxjPYqGdTiDFVMLkREH10J80gAri/0fDqZTiUp8ZCRvuAY3EjPQwAAA9HUsfxIc6rQAAAAASUVORK5CYII=") no-repeat center center;
	border: none;

	opacity: 0.6;

	z-index:200;

	text-indent: -9999px;
	overflow: hidden;
}

.muted .muteButton {
	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAA+0lEQVQ4y83TPUoDURAA4LEQBBEEiTdQsBEFFVEQCyGQCwiClcRrbGMT9AJWHiE2HsCfG6yVN7CQrIgYq88iu/kzyabMVI/hfTxm3kzErIZt11b/ZauOx4EbvA4TX3i2NgpUpD3izGlEhAstZI5KiJrPbraJlvVS0s3Oe8CTudHkvb8WTUsRlmU4Gbz6oj+KWtruIyJc4W4QDEeqEqGmbSfCId4mgx65jLCC7zJQkIUIi8jKX8hJhC2kk4pG3uTOK7t+3I4ekaS43/2XDqk6GDdVSQEGyaTJTdDOzxt+pyHn+fDVZf0dK9+SDzzal6IxDdjrLJCKhs2Z3f4/57xXqFeXkjYAAAAASUVORK5CYII=");
}

.loading .muteButton {
	display: none;
}

body .infoButton {
	right: inherit;
	left: 20px;
	background-image: url('./images/rounded-help_outline-24dp.png')
}

.overlay {
	position: fixed;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	background: rgba(0,0,0,0.8);
	color: #fff;

	z-index:100;

	transition: all 0.3s ease-in;
}

.overlay.closed {
	opacity: 0;
	background: rgba(0,0,0,0.0);
	/*transform: scaleX(0) scaleY(0) translateY(120vh);*/
}

.dialog {
	position: absolute;
	left: 50%;
	top: 50%;
	margin: -150px 0 0 -120px;
	width: 240px;
	height: 300px;
}

.dialog button {
	margin-top: 25px;
	border: solid 1px #fff;
	width: 100%;

	background: #000 url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=) no-repeat 0 0;
	background-size: 100% 100%;
	animation: loadingbar 140s;

	transition: background-size 0.3s ease-in;

	color: #000;
	padding: 7px 20px;
	/* text-transform: uppercase; */
	font-variant: small-caps;
}

.loading .dialog button {
	color: #999;
	animation-duration: 140s;
}

.loaded .dialog button {
	animation: none;
	background-size: 100% 100%;
}

.secondaryLoading {
	position: fixed;
	bottom: 0;
	height: 5px;
	width: 100%;
	display: block;
	opacity: 0;
	background: rgba(0,0,0,0.8);

	transition: all 0.5s ease-in;
	transition-delay: 0.5s;
}

.partiallyLoaded .secondaryLoading {
	opacity: 0.7;
}

html .loaded .secondaryLoading {
	opacity: 0;
	transition-delay: 0s;
}

.secondaryLoading .dialog {
 	top: calc(100vh - 5px);
	bottom: 0;
	width: 100%;
	height: 100%;
	margin: auto;
	left: initial;
	top: initial;
}

.secondaryLoading .dialog button {
	margin: 0;
	border: none;
	color: transparent;
}

.loaded .dialog button:hover,
.loaded .dialog button:active {
	background: #000;
	color: #fff;
}

@keyframes loadingbar {
  0% {
	background-size: 0% 100%;
  }

  3% {
	background-size: 30% 100%;
  }

  15% {
	background-size: 50% 100%;
  }

  50% {
	background-size: 80% 100%;
  }

  90% {
	background-size: 95% 100%;
  }

  100% {
	background-size: 97% 100%;
  }
}

/* Cross-fade */
.crossfade {
	position: relative;
}

.about .crossfade div {
	/*transition: all 0.3s ease-in-out;*/
	animation-name: crossFade;
	animation-duration: 0.3s;
	animation-timing-function: ease-in-out;
}

.info {
	opacity: 0;
}

.welcome {
	top: 0;
	position: absolute;
	
	animation-fill-mode: forwards;
}

html .about .info {
	z-index: 10;
	animation-direction: reverse;
	animation-fill-mode: forwards;
}

@keyframes crossFade {
	0% {
		opacity: 1;
		transform: scale(1);
	}
	99% {
		opacity: 0;
		transform: scale(1);
	}
	100% {
		opacity: 0;
		transform: scale(0);
	}
}


</style>

		<link rel="stylesheet" href="a11y/A11yHelper.css" />

	</head>
	<body class="loading">

		<div id="container">

		</div>

		<button id="muteButton" class="muteButton button">Mute volume</button>

		<div id="intro" class="overlay">
			<div class="dialog">
				<button class="start" id="startButton">Loading...</button>
			</div>
		</div>
		<div id="secondaryLoading" class="secondaryLoading">
			<div class="dialog">
				<button>Loading...</button>
			</div>
		</div>








		<script type="x-shader/x-vertex" id="vertexshader">

			varying vec2 vUv;

			void main() {

				vUv = uv;

				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			}

		</script>

		<script type="x-shader/x-fragment" id="fragmentshader">

			uniform sampler2D baseTexture;
			uniform sampler2D bloomTexture;

			varying vec2 vUv;

			void main() {

				gl_FragColor = ( texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );

			}

		</script>













		<script id="vertexShaderAudio" type="x-shader/x-vertex">

			varying vec2 vUv;

			void main() {

				vUv = uv;

				gl_Position = vec4( position, 1.0 );

			}

		</script>

		<script id="fragmentShaderAudio" type="x-shader/x-fragment">

			uniform sampler2D tAudioData;
			varying vec2 vUv;

			void main() {

				vec3 backgroundColor = vec3( 0.125, 0.125, 0.125 );
				vec3 color = vec3( 1.0, 1.0, 0.0 );

				float f = texture2D( tAudioData, vec2( vUv.x, 0.0 ) ).r;

				float i = step( vUv.y, f ) * step( f - 0.0125, vUv.y );

				gl_FragColor = vec4( mix( backgroundColor, color, i ), 1.0 );

			}

		</script>




		<script type="x-shader/x-vertex" id="vertexShaderWireframe">

			attribute vec3 center;
			varying vec3 vCenter;

			void main() {

				vCenter = center;

				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			}

		</script>

		<script type="x-shader/x-fragment" id="fragmentShaderWireframe">

			uniform float widthFactor;
			uniform float edgeThreshold;

			varying vec3 vCenter;

			float edgeFactorTri() {

				vec3 d = fwidth( vCenter.xyz );

				vec3 a3 = smoothstep( vec3( 0.0 ), d * widthFactor, vCenter.xyz );

				return min( min( a3.x, a3.y ), a3.z );

			}

			void main() {

				if ( edgeFactorTri() > edgeThreshold ) {
					gl_FragColor = vec4( 0.9, 0.0, 0.0, 1.0 );
				} else {
					gl_FragColor = gl_FrontFacing ? vec4( 0.0, 0.9, 0.0, 1.0 ) : vec4( 0.0, 0.0, 0.9, 1.0 );
				}
			}

		</script>









		<script>
			var DEBUG = window.location.href.indexOf('debug=true') > 0;
			var debugPrint = DEBUG ? function () {
					console.log.apply(console, arguments);
				} 
				: 
				function () {};



			function glowMaterial(material) {
				material.__currentHex = material.emissive.getHex();
				material.emissive.setHex( material.color.getHex() );
			}

			function unglowMaterial(material) {
				if (typeof(material.__currentHex) != 'undefined') {
					material.emissive.setHex( material.__currentHex );
				}
			}
		</script>




		<script>


	function calculateProbability(probabilityOfOccuring) {
	  return fxrand() < probabilityOfOccuring;
	}
	
	window.$fxhashFeatures = {
	  "loop_bleeps": calculateProbability(0.3),
	  "loop_chords": calculateProbability(0.4),
	  "loop_latin": calculateProbability(0.1),
	  "loop_drums": calculateProbability(0.3),
	  "lively": calculateProbability(0.7),
	  "isMultipalette": calculateProbability(0.8),
	}
	debugPrint('features: ', window.$fxhashFeatures);

		</script>
	
	

		<script src="a11y/A11yHelper.js"></script>

		<script src="js/libs/dat.gui.min.js"></script>
		<script src="js/libs/stats.min.js"></script>

		<script src="js/libs/Tween.min.js"></script>


		<script src="js/WebGL.js"></script>

		<script type="text/javascript" src="js/libs/Tone.min.js"></script>
		<script type="text/javascript" src="js/libs/StartAudioContext.js"></script>









		<script>

		if ( WEBGL.isWebGLAvailable() === false ) {

			document.body.appendChild( WEBGL.getWebGLErrorMessage() );

		}

		</script>











	</body>
</html>
