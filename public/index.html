<!DOCTYPE html>
<html lang="en">
	<head>
		<title>dreamsynth - odbol</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

		<meta property="og:url"                content="http://odbol.com/dreamsynth" />
		<meta property="og:title"              content="dreamsynth" />
		<meta property="og:description"        content="I saw this in a dream. Then I made it into a musical instrument." />
		<meta property="og:image"              content="http://odbol.com/dreamsynth/dreamsynth-screenshot.png" />
   
    <script id="fxhash-snippet">
      //---- do not edit the following code (you can indent as you wish)
      let alphabet = "123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"
      var fxhash = "oo" + Array(49).fill(0).map(_=>alphabet[(Math.random()*alphabet.length)|0]).join('')
      let b58dec = str=>[...str].reduce((p,c)=>p*alphabet.length+alphabet.indexOf(c)|0, 0)
      let fxhashTrunc = fxhash.slice(2)
      let regex = new RegExp(".{" + ((fxhash.length/4)|0) + "}", 'g')
      let hashes = fxhashTrunc.match(regex).map(h => b58dec(h))
      let sfc32 = (a, b, c, d) => {
        return () => {
          a |= 0; b |= 0; c |= 0; d |= 0
          var t = (a + b | 0) + d | 0
          d = d + 1 | 0
          a = b ^ b >>> 9
          b = c + (c << 3) | 0
          c = c << 21 | c >>> 11
          c = c + t | 0
          return (t >>> 0) / 4294967296
        }
      }
      var fxrand = sfc32(...hashes)
      // call this method to trigger the preview
      function fxpreview() {
        console.log("fxhash: TRIGGER PREVIEW")
      }
      //---- /do not edit the following code
    </script>

<style>
body {
	font-family: Monospace;
	background-color: #000;
	margin: 0px;
	overflow: hidden;
}

html {
  position: fixed;
  height: 100%;
  overflow: hidden;
}

body {
  width: 100vw;
  height: 100vh;
  overflow-y: hidden;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
}
			
</style>

		<link rel="stylesheet" href="style.css" />
		<link rel="stylesheet" href="a11y/A11yHelper.css" />

	</head>
	<body class="loading">

		<div id="container">

		</div>

		<button id="muteButton" class="muteButton button">Mute volume</button>

		<div id="intro" class="overlay">
			<div class="dialog">
				<button class="start" id="startButton">Loading...</button>
			</div>
		</div>









		<script type="x-shader/x-vertex" id="vertexshader">

			varying vec2 vUv;

			void main() {

				vUv = uv;

				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			}

		</script>

		<script type="x-shader/x-fragment" id="fragmentshader">

			uniform sampler2D baseTexture;
			uniform sampler2D bloomTexture;

			varying vec2 vUv;

			void main() {

				gl_FragColor = ( texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );

			}

		</script>













		<script id="vertexShaderAudio" type="x-shader/x-vertex">

			varying vec2 vUv;

			void main() {

				vUv = uv;

				gl_Position = vec4( position, 1.0 );

			}

		</script>

		<script id="fragmentShaderAudio" type="x-shader/x-fragment">

			uniform sampler2D tAudioData;
			varying vec2 vUv;

			void main() {

				vec3 backgroundColor = vec3( 0.125, 0.125, 0.125 );
				vec3 color = vec3( 1.0, 1.0, 0.0 );

				float f = texture2D( tAudioData, vec2( vUv.x, 0.0 ) ).r;

				float i = step( vUv.y, f ) * step( f - 0.0125, vUv.y );

				gl_FragColor = vec4( mix( backgroundColor, color, i ), 1.0 );

			}

		</script>




		<script type="x-shader/x-vertex" id="vertexShaderWireframe">

			attribute vec3 center;
			varying vec3 vCenter;

			void main() {

				vCenter = center;

				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			}

		</script>

		<script type="x-shader/x-fragment" id="fragmentShaderWireframe">

			uniform float widthFactor;
			uniform float edgeThreshold;

			varying vec3 vCenter;

			float edgeFactorTri() {

				vec3 d = fwidth( vCenter.xyz );

				vec3 a3 = smoothstep( vec3( 0.0 ), d * widthFactor, vCenter.xyz );

				return min( min( a3.x, a3.y ), a3.z );

			}

			void main() {

				if ( edgeFactorTri() > edgeThreshold ) {
					gl_FragColor = vec4( 0.9, 0.0, 0.0, 1.0 );
				} else {
					gl_FragColor = gl_FrontFacing ? vec4( 0.0, 0.9, 0.0, 1.0 ) : vec4( 0.0, 0.0, 0.9, 1.0 );
				}
			}

		</script>









		<script>
			var DEBUG = window.location.href.indexOf('debug=true') > 0;
			var debugPrint = DEBUG ? function () {
					console.log.apply(console, arguments);
				} 
				: 
				function () {};



			function glowMaterial(material) {
				material.__currentHex = material.emissive.getHex();
				material.emissive.setHex( material.color.getHex() );
			}

			function unglowMaterial(material) {
				if (typeof(material.__currentHex) != 'undefined') {
					material.emissive.setHex( material.__currentHex );
				}
			}
		</script>




		<script>


	function calculateProbability(probabilityOfOccuring) {
	  return fxrand() < probabilityOfOccuring;
	}
	
	window.$fxhashFeatures = {
	  "loop_bell": calculateProbability(0.8),
	  "loop_chords": calculateProbability(0.5),
	  "loop_latin": calculateProbability(0.24),
	  "loop_techno": calculateProbability(0.1),
	  "isMultipalette": calculateProbability(0.2),
	}
	debugPrint('features: ', window.$fxhashFeatures);

		</script>
	
	

		<script src="a11y/A11yHelper.js"></script>

		<script src="js/libs/dat.gui.min.js"></script>
		<script src="js/libs/stats.min.js"></script>

		<script src="js/libs/Tween.min.js"></script>


		<script src="js/WebGL.js"></script>

		<script type="text/javascript" src="js/libs/Tone.min.js"></script>
		<script type="text/javascript" src="js/libs/StartAudioContext.js"></script>









		<script>

		if ( WEBGL.isWebGLAvailable() === false ) {

			document.body.appendChild( WEBGL.getWebGLErrorMessage() );

		}

		</script>











	</body>
</html>
